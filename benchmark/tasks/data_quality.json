{
  "category": "data_quality",
  "description": "Tasks requiring detection and analysis of data quality issues",
  "tasks": [
    {
      "task_id": "HDH-DQ-001",
      "category": "data_quality",
      "difficulty": "easy",
      "title": "Find Orphaned Lab Results",
      "description": "Find lab results (Observations) in the LIS that do not have a corresponding order (no basedOn reference to a ServiceRequest). These are 'orphaned' results.",
      "systems_required": ["lis"],
      "max_turns": 15,
      "success_criteria": {
        "type": "threshold",
        "target_field": "count_accuracy",
        "threshold": 0.8
      },
      "grading": {
        "weight": 0.04,
        "sub_goals": [
          {"id": "queried_observations", "description": "Retrieved observations", "points": 0.3},
          {"id": "checked_basedon", "description": "Checked basedOn field", "points": 0.4},
          {"id": "correct_count", "description": "Count within 20% of actual", "points": 0.3}
        ]
      },
      "expected_response": {
        "orphaned_count": "integer",
        "sample_orphaned_ids": ["list of up to 10 Observation IDs"],
        "methodology": "string"
      },
      "ground_truth": {
        "count_range": [25, 35]
      }
    },
    {
      "task_id": "HDH-DQ-002",
      "category": "data_quality",
      "difficulty": "easy",
      "title": "Find Abandoned Orders",
      "description": "Find lab orders (ServiceRequests) in the LIS that are still marked as 'active' but were created more than 100 days ago. These are likely abandoned orders that were never completed.",
      "systems_required": ["lis"],
      "max_turns": 15,
      "success_criteria": {
        "type": "threshold",
        "target_field": "count_accuracy",
        "threshold": 0.8
      },
      "grading": {
        "weight": 0.04
      },
      "expected_response": {
        "abandoned_count": "integer",
        "sample_abandoned_ids": ["list of up to 10 ServiceRequest IDs"],
        "oldest_order_date": "string"
      },
      "ground_truth": {
        "count_range": [15, 25]
      }
    },
    {
      "task_id": "HDH-DQ-003",
      "category": "data_quality",
      "difficulty": "medium",
      "title": "Find Future-Dated Records",
      "description": "Find any records across EHR, LIS, and Pharmacy that have dates in the future (data entry errors). Check effectiveDateTime, authoredOn, recordedDate fields.",
      "systems_required": ["ehr", "lis", "pharmacy"],
      "max_turns": 20,
      "success_criteria": {
        "type": "threshold",
        "target_field": "found_count",
        "threshold": 0.7
      },
      "grading": {
        "weight": 0.05
      },
      "expected_response": {
        "future_dated_records": [
          {
            "system": "string",
            "resource_type": "string",
            "resource_id": "string",
            "field": "string",
            "value": "string (the future date)"
          }
        ],
        "total_count": "integer"
      }
    },
    {
      "task_id": "HDH-DQ-004",
      "category": "data_quality",
      "difficulty": "medium",
      "title": "Find Missing Required Fields",
      "description": "Audit Patient records in the EHR for data completeness. Find patients missing critical fields: birthDate, gender, or name. Report the completeness percentage.",
      "systems_required": ["ehr"],
      "max_turns": 15,
      "success_criteria": {
        "type": "exact_match",
        "target_field": "completeness_report"
      },
      "grading": {
        "weight": 0.04
      },
      "expected_response": {
        "total_patients": "integer",
        "completeness": {
          "birthDate": {"present": "integer", "missing": "integer", "percentage": "number"},
          "gender": {"present": "integer", "missing": "integer", "percentage": "number"},
          "name": {"present": "integer", "missing": "integer", "percentage": "number"}
        },
        "patients_missing_any_field": ["list of patient IDs"]
      }
    },
    {
      "task_id": "HDH-DQ-005",
      "category": "data_quality",
      "difficulty": "hard",
      "title": "Cross-System Data Consistency",
      "description": "For 10 randomly selected patients, compare their demographics (name, DOB, gender) across all systems where they exist. Report any inconsistencies.",
      "systems_required": ["ehr", "lis", "pharmacy", "pas", "billing"],
      "max_turns": 40,
      "success_criteria": {
        "type": "threshold",
        "target_field": "analysis_completeness",
        "threshold": 0.8
      },
      "grading": {
        "weight": 0.08
      },
      "expected_response": {
        "patients_analyzed": "integer",
        "inconsistencies_found": [
          {
            "patient_canonical_id": "string",
            "field": "name|birthDate|gender",
            "values_by_system": {
              "ehr": "string",
              "lis": "string",
              "pharmacy": "string"
            },
            "recommended_value": "string"
          }
        ],
        "consistency_score": "number 0-1"
      }
    },
    {
      "task_id": "HDH-DQ-006",
      "category": "data_quality",
      "difficulty": "hard",
      "title": "Referential Integrity Check",
      "description": "Check referential integrity in the LIS: Do all Observations reference valid Patients? Do all ServiceRequests reference valid Patients? Find and report broken references.",
      "systems_required": ["lis"],
      "max_turns": 25,
      "success_criteria": {
        "type": "threshold",
        "target_field": "integrity_report_accuracy",
        "threshold": 0.9
      },
      "grading": {
        "weight": 0.05
      },
      "expected_response": {
        "observations_checked": "integer",
        "service_requests_checked": "integer",
        "broken_patient_references": [
          {
            "resource_type": "string",
            "resource_id": "string",
            "referenced_patient": "string",
            "error": "patient_not_found|invalid_format"
          }
        ],
        "integrity_score": "number 0-1"
      }
    }
  ]
}
