{
  "category": "data_provenance",
  "description": "Tasks requiring understanding of data lineage and source of truth",
  "tasks": [
    {
      "task_id": "HDH-PRV-001",
      "category": "data_provenance",
      "difficulty": "easy",
      "title": "Identify Source System for Data Type",
      "description": "Determine which system is the authoritative source for each type of clinical data. For example, which system should be queried for current medications? For diagnoses? For lab results?",
      "systems_required": ["ehr", "lis", "pharmacy"],
      "max_turns": 15,
      "success_criteria": {
        "type": "exact_match",
        "target_field": "source_mapping"
      },
      "grading": {
        "weight": 0.03,
        "sub_goals": [
          {"id": "medications_source", "description": "Identified medication source", "points": 0.33},
          {"id": "diagnoses_source", "description": "Identified diagnosis source", "points": 0.33},
          {"id": "labs_source", "description": "Identified lab source", "points": 0.34}
        ]
      },
      "expected_response": {
        "source_of_truth": {
          "diagnoses": {"system": "string", "resource_type": "string"},
          "medications": {"system": "string", "resource_type": "string"},
          "lab_results": {"system": "string", "resource_type": "string"},
          "lab_orders": {"system": "string", "resource_type": "string"},
          "encounters": {"system": "string", "resource_type": "string"},
          "demographics": {"system": "string", "resource_type": "string"}
        },
        "reasoning": "string"
      },
      "ground_truth": {
        "source_of_truth": {
          "diagnoses": {"system": "ehr", "resource_type": "Condition"},
          "medications": {"system": "pharmacy", "resource_type": "MedicationRequest"},
          "lab_results": {"system": "lis", "resource_type": "Observation"},
          "lab_orders": {"system": "lis", "resource_type": "ServiceRequest"},
          "encounters": {"system": "pas", "resource_type": "Encounter"},
          "demographics": {"system": "ehr", "resource_type": "Patient"}
        }
      }
    },
    {
      "task_id": "HDH-PRV-002",
      "category": "data_provenance",
      "difficulty": "medium",
      "title": "Trace Lab Result to Order",
      "description": "Given a specific lab result (Observation), trace it back to its originating order (ServiceRequest) and the encounter/visit when it was ordered. Return the complete chain.",
      "systems_required": ["lis", "pas"],
      "max_turns": 15,
      "success_criteria": {
        "type": "exact_match",
        "target_field": "provenance_chain"
      },
      "grading": {
        "weight": 0.04
      },
      "expected_response": {
        "observation_id": "string",
        "provenance_chain": {
          "result": {"id": "string", "code": "string", "value": "string"},
          "order": {"id": "string", "code": "string", "authored_on": "string"},
          "encounter": {"id": "string", "type": "string", "date": "string"},
          "patient": {"id": "string", "name": "string"}
        }
      }
    },
    {
      "task_id": "HDH-PRV-003",
      "category": "data_provenance",
      "difficulty": "medium",
      "title": "Identify Data Freshness",
      "description": "For a specific patient, determine the freshness of their data in each system. When was each system's data last updated? Which systems have stale data (>30 days old)?",
      "systems_required": ["ehr", "lis", "pharmacy", "pas"],
      "max_turns": 20,
      "success_criteria": {
        "type": "threshold",
        "target_field": "freshness_accuracy",
        "threshold": 0.8
      },
      "grading": {
        "weight": 0.04
      },
      "expected_response": {
        "patient_id_queried": "string (EHR ID)",
        "data_freshness": {
          "ehr": {"last_updated": "string", "days_old": "integer", "is_stale": "boolean"},
          "lis": {"last_updated": "string", "days_old": "integer", "is_stale": "boolean"},
          "pharmacy": {"last_updated": "string", "days_old": "integer", "is_stale": "boolean"},
          "pas": {"last_updated": "string", "days_old": "integer", "is_stale": "boolean"}
        },
        "stale_systems": ["list of systems with data >30 days old"]
      }
    },
    {
      "task_id": "HDH-PRV-004",
      "category": "data_provenance",
      "difficulty": "hard",
      "title": "Resolve Conflicting Data",
      "description": "Patient MRN-100042 has different values for the same attribute in different systems (e.g., different phone numbers, slightly different names). Identify all conflicts and recommend which value should be authoritative.",
      "systems_required": ["ehr", "lis", "pharmacy", "billing"],
      "max_turns": 30,
      "success_criteria": {
        "type": "threshold",
        "target_field": "conflicts_identified",
        "threshold": 0.7
      },
      "grading": {
        "weight": 0.06
      },
      "expected_response": {
        "patient_queried": "MRN-100042",
        "conflicts": [
          {
            "field": "string",
            "values": {
              "ehr": "string",
              "lis": "string",
              "pharmacy": "string",
              "billing": "string"
            },
            "recommended_value": "string",
            "recommendation_reason": "string"
          }
        ],
        "conflict_count": "integer",
        "resolution_strategy": "string"
      }
    },
    {
      "task_id": "HDH-PRV-005",
      "category": "data_provenance",
      "difficulty": "expert",
      "title": "Build Complete Patient Timeline",
      "description": "Construct a complete timeline of all clinical events for patient MRN-100042 across all systems. Include diagnoses, lab orders/results, medication changes, and encounters in chronological order.",
      "systems_required": ["ehr", "lis", "pharmacy", "pas"],
      "max_turns": 40,
      "success_criteria": {
        "type": "threshold",
        "target_field": "timeline_completeness",
        "threshold": 0.7
      },
      "grading": {
        "weight": 0.08
      },
      "expected_response": {
        "patient": {
          "ehr_id": "string",
          "name": "string"
        },
        "timeline": [
          {
            "date": "string",
            "event_type": "diagnosis|lab_order|lab_result|medication_start|medication_stop|encounter",
            "source_system": "string",
            "description": "string",
            "resource_id": "string"
          }
        ],
        "total_events": "integer",
        "date_range": {"start": "string", "end": "string"}
      }
    }
  ]
}
